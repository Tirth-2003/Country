@model IEnumerable<CountryApp.Models.Country>
@{
    ViewData["title"] = "multiselect";
}

<form asp-controller="Country" asp-action="MultiSelect" class="mt-3">
    <div class="row">
        <div class="col mt-3">
            <label for="CountryId">CountryId</label>
            @* <input type="number" name="CountryId" value="@TempData["CountryId"]" placeholder="Country Id" /> *@
            <select name="countryId" multiple id="CountryID" class="form-select">
                <option value="">All</option>
                @foreach (var item in Model.Select(x => x.CountryId).Distinct())
                {
                    <option value="@item">@item</option>
                }

            </select>
        </div>
        <div class="col mt-3">
            <label for="CountryCode">CountryCode</label>
            @* <input type="text" name="CountryCode" value="@TempData["Code"]" placeholder="Country code" /> *@
            <select multiple name="countryCode" id="CountryCode" class="form-select">
                @foreach (var item in Model.Select(x => x.CountryCode).Distinct())
                {
                    <option value="@item">@item</option>
                }
            </select>
        </div>
        <div class="col mt-3">
            <label for="CountryName">CountryName</label>
            <input type="text" name="countryName" value="@TempData["name"]" placeholder="Country Name" />
        </div>
        <div class="col mt-3">
            <label for="ShortCode">ShortCode</label>
            <input type="text" name="shortCode" value="@TempData["shortCode"]" placeholder="Short Code" />
        </div>
        <div class="col mt-3">
            <label for="CurrencyCode">CurrencyCode</label>
            <input type="text" name="currencyCode" value="@TempData["currencyCode"]" placeholder="Currency Code" />
        </div>
        <div class="col mt-3">
            <label for="CurrencyName">CurrencyName</label>
            <input type="text" name="currencyName" value="@TempData["currencyName"]" placeholder="Currency Name" />
        </div>
        <div class="col mt-3">
            <label for="CurrencySymbol">CurrencySymbol</label>
            @* <select multiple name="currencySymbol" id="currencySymbol" class="form-select">
                                @foreach (var item in Model.Select(x => x.CurrencySymbol).Distinct())
                                {
                                    <option value="@item">@item</option>
                                }
                            </select> *@
            <input type="text" name="currencySymbol" value="@TempData["currencySymbol"]" placeholder="Currency Symbol" />
        </div>
    </div>
    <div class="row">
        <div class="col mt-3">
            <label for="CurrencyId">CurrencyId</label>
            <input type="number" name="currencyId" value="@TempData["currencyId"]" placeholder="Currency Id" />
        </div>
        <div class="col mt-3">
            <label for="CountryShortCode">CountryShortCode</label>
            <input type="text" name="countryShortCode" value="@TempData["countryShortCode"]" placeholder="Country Short Code" />
        </div>
        <div class="col mt-3">
            <label for="CountryAlpha3Code">CountryAlpha3Code</label>
            <input type="text" name="countryAlpha3Code" value="@TempData["countryAlpha3Code"]" placeholder="Country Alpha3 Code" />


        </div>
        <div class="col mt-3">
            <label for="RiskScore">RiskScore</label>
            <input type="number" step="0.1" name="riskScore" value="@TempData["riskScore"]" placeholder="Risk Score" />
        </div>
        <div class="col mt-3">
            <label for="IBANexist">IBANexist</label>
            <select name="ibanExist" class="form-select">
                <option value="">All</option>
                <option value="True">True</option>
                <option value="False">False</option>
            </select>
        </div>
        <div class="col mt-3">
            <label for="IBANlengthRange">IBANlength Range</label>
            <input type="number" name="ibanLength" value="" placeholder="IBAN Length" />
        </div>
        <div class="col mt-3">
            <label for="DisplayNumber">DisplayNumber</label>
            <input type="text" name="displayNumber" value="@TempData["displayNumber"]" placeholder="Display Number" />
        </div>
    </div>
    <button type="submit"  class="btn btn-primary mt-3">Search</button>
</form>

<div class="table-responsive">
    <table class="table table-striped">
        <thead class="table-dark">
            <tr>
                <th>CountryID</th>
                <th>CountryCode</th>
                <th>CountryName</th>
                <th>ShortCode</th>
                <th>CurrencyCode</th>
                <th>CurrencyName</th>
                <th>CurrencySymbol</th>
                <th>CurrencyId</th>
                <th>CountryShortCode</th>
                <th>CountryAlpha3Code</th>
                <th>RiskScore</th>
                <th>IBANexist</th>
                <th>IBANlength</th>
                <th>DisplayNumber</th>
            </tr>
        </thead>
        <tbody class="text-center">
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.CountryId</td>
                    <td>@item.CountryCode</td>
                    <td>@item.CountryName</td>
                    <td>@item.ShortCode</td>
                    <td>@item.CurrencyCode</td>
                    <td>@item.CurrencyName</td>
                    <td>@item.CurrencySymbol</td>
                    <td>@item.CurrencyId</td>
                    <td>@item.CountryShortCode</td>
                    <td>@item.CountryAlpha3Code</td>
                    <td>@item.RiskScore</td>
                    <td>@item.Ibanexist</td>
                    <td>@(item.Ibanlength > 0 ? item.Ibanlength : 0)</td>
                    <td>@item.DisplayNumber</td>
                </tr>
            }
        </tbody>
    </table>
</div>

@section Scripts {
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#CountryID').select2({
                placeholder: "Select Country Code",
                allowClear: true
            });
            $('#CountryCode').select2();
            $('#currencySymbol').select2();
        });



    </script>
}